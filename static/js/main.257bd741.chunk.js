(this["webpackJsonpreact-area-chart"]=this["webpackJsonpreact-area-chart"]||[]).push([[0],{14:function(e,t,a){e.exports=a(24)},19:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(5),i=a(7),r=a(1),l=a(2),o=a(6),s=a(4),c=a(3),u=a(0),h=a.n(u),m=a(11),v=a.n(m),d=a(12),p=(a(19),function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).generateGridLayoutStyle=Object(d.memoize_one)((function(e,t,a,n,i,r,l,o){return{display:"grid",height:t,width:e,gridGap:0,gridTemplateColumns:"".concat(a,"px ").concat(n,"px ").concat(i,"px"),gridTemplateRows:"".concat(r,"px ").concat(l,"px ").concat(o,"px")}})),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.width,n=e.height,i=e.leftWidth,r=e.plotWidth,l=e.rightWidth,o=e.topHeight,s=e.plotHeight,c=e.bottomHeight,u=this.generateGridLayoutStyle(a,n,i,r,l,o,s,c);return h.a.createElement("div",{style:u,className:"PlotContainers-positionRelative"},t)}}]),a}(u.Component)),f=function(e){return h.a.createElement("div",{className:"PlotContainers-positionRelative"},e.children?h.a.Children.map(e.children,(function(e){return h.a.createElement("div",{className:"PlotContainers-positionAbsolute"},e)})):null)},g=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).canvasW=n.props.canvasW,n.canvasH=n.props.canvasH,n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.panelHeight,a=e.panelWidth,n=e.label,i={leftPanel:{height:t+"px",width:a+"px",backgroundColor:e.colorString},areaChartLabel:{marginLeft:"20px",lineHeight:t+"px",color:"#373c62",fontWeight:"800",fontFamily:"MuseoSans, Sans"}};return h.a.createElement("div",{className:"area-chart-left-panel",style:i.leftPanel},h.a.createElement("div",{className:"area-chart-label",style:i.areaChartLabel}," ",n," "))}}]),a}(u.PureComponent);function b(e,t,a,n){return(n-t)/((a-t)/e)}var C=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).canvasW=n.props.width,n.canvasH=n.props.height,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.areaChartCanvas=this.refs.areaChartCanvas,this.areaChartCtx=this.areaChartCanvas.getContext("2d"),this.drawCPBChart(this.areaChartCtx)}},{key:"componentDidUpdate",value:function(){this.drawCPBChart(this.areaChartCtx)}},{key:"drawCPBChart",value:function(e){var t,a=this;e.canvas.width=e.canvas.width;var n=this.props.dtWindow[0]/1e3,i=this.props.dtWindow[1]/1e3,r=this.canvasH,l=this.props.data,o=this.props.yRange;e.lineWidth=2,e.strokeStyle="rgba(128,128,128,0.7)";var s=o[1]-o[0];l.forEach((function(r){t=b(a.canvasW,n,i,r.time);var l=function(e,t,a,n){return e-(n-t)/((a-t)/e)}(a.canvasH,o[0]-.3*s,o[1]+.4*s,r.value);e.lineTo(t,l)})),e.stroke();var c=r;t=b(this.canvasW,n,i,l[l.length-1].time),e.lineTo(t,c),t=b(this.canvasW,n,i,l[0].time),e.lineTo(t,c),e.fillStyle="rgba(192,192,192,0.4)",e.fill()}},{key:"render",value:function(){return h.a.createElement("canvas",{className:"area-chart-canvas",ref:"areaChartCanvas",width:this.canvasW,height:this.canvasH})}}]),a}(u.PureComponent),y=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).canvasW=n.props.canvasW,n.canvasH=n.props.canvasH,n.minY=n.props.minY,n.maxY=n.props.maxY,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.areaChartYAxisCanvas=this.refs.areaChartYAxisCanvas,this.areaChartYAxisCtx=this.areaChartYAxisCanvas.getContext("2d"),this.drawYAxis(this.areaChartYAxisCtx)}},{key:"componentDidUpdate",value:function(){this.minY=this.props.minY,this.maxY=this.props.maxY,this.drawYAxis(this.areaChartYAxisCtx)}},{key:"toDomYCoord_Linear",value:function(e,t,a,n){return e-(n-t)/((a-t)/e)}},{key:"drawYAxis",value:function(e){var t=this.props.yRange;e.canvas.width=e.canvas.width,e.lineWidth=3,e.moveTo(this.canvasW,5),e.lineTo(this.canvasW,this.canvasH-5),e.stroke(),e.font="600 14px MuseoSans, Sans",e.textBaseline="middle",e.fillStyle="#373c62";var a=t[1]-t[0],n=this.toDomYCoord_Linear(this.canvasH,t[0]-.3*a,t[1]+.4*a,t[0]);e.fillText(t[0],this.canvasW-25,n),n=this.toDomYCoord_Linear(this.canvasH,t[0]-.3*a,t[1]+.4*a,t[1]),e.fillText(t[1],this.canvasW-25,n),e.stroke()}},{key:"render",value:function(){return h.a.createElement("canvas",{className:"area-chart-y-axis",ref:"areaChartYAxisCanvas",style:{position:"absolute"},width:this.canvasW,height:this.canvasH})}}]),a}(u.PureComponent),w=a(13),x=a(8),O=a(9),k=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).ref=h.a.createRef(),n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.width,a=e.height,n=(e.minX,e.maxX,Object(w.a)(e,["width","height","minX","maxX"]));return h.a.createElement("canvas",Object.assign({ref:this.ref,width:t,height:a},n)," ")}},{key:"componentDidMount",value:function(){this.draw()}},{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.props,t=e.minX,a=e.maxX,n=e.width,i=a-t;this.draw_memo=this.draw_memo||{validFromDiffX:0,validToDiffX:-1,rangeMinX:0,rangeMaxX:-1};var r=this.draw_memo;if(r.validFromDiffX>i||i>r.validToDiffX||r.rangeMinX>t||a>r.rangeMaxX){r.rangeMinX=t-10*i,r.rangeMaxX=a+10*i;var l=Object(O.generateDateGrids)(t,a,r.rangeMinX,r.rangeMaxX),o=l.grids,s=l.validFromDiffX,c=l.validToDiffX;r.validFromDiffX=s,r.validToDiffX=c,r.grids=o}var u=Math.max(0,Object(x.bisect_right)(r.grids,t)),h=Math.min(r.grids.length-1,Object(x.bisect_left)(r.grids,a)),m=r.grids.slice(u,h+1).map((function(e){return Object(O.toDomXCoord_Linear)(n,t,a,e)})),v=this.ref.current.getContext("2d");v.clearRect(0,0,n,400),v.globalAlpha=.1,this.verticalLinePlot(v,n,400,m)}},{key:"verticalLinePlot",value:function(e,t,a,n){var i=null;e.beginPath();for(var r=0;r<n.length;r++)i=Math.round(n[r]),e.moveTo(i,0),e.lineTo(i,a);e.stroke()}}]),a}(u.PureComponent),j=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"filterDataToDtWindow",value:function(e){var t=this.props.dtWindow[0]/1e3,a=this.props.dtWindow[1]/1e3,n=e,i=new Set,r=[];return e&&t&&(n=n.filter((function(e){return e.time<=a&&e.time>=t&&(i.has(e.time)||(i.add(e.time),r.push(e.time))),e.time<=a&&e.time>=t}))),[n,r]}},{key:"getDaysBetweenDates",value:function(e,t){var a=new Date(e),n=new Date(t);return a.setHours(12,0,0),n.setHours(12,0,0),Math.round((n-a)/864e5)}},{key:"render",value:function(){var e=this.props,t=e.dtWindow,a=e.width,n=e.height,i=e.yRange,r=e.data,l=e.label,o=e.colorString,s=e.areaChartBackgroundColor,c=a-200-0,u=n-0-0,m=0,v=0;t&&(m=t[0],v=t[1]);var d={leftPanelGradShadow:{position:"absolute",top:0,left:148,height:n,width:70,opacity:1,backgroundImage:"linear-gradient(to right, black, rgba(255,255,255,0))"},mainPlotWrapDiv:{zIndex:-1,backgroundColor:s}};return h.a.createElement(p,{width:a,height:n,leftWidth:200,plotWidth:c,rightWidth:0,topHeight:0,plotHeight:u,bottomHeight:0},h.a.createElement(f,null),h.a.createElement(f,null),h.a.createElement(f,null),h.a.createElement(f,null,h.a.createElement("div",{style:d.leftPanelGradShadow}),h.a.createElement(g,{label:l,colorString:o,panelWidth:200,panelHeight:n}),h.a.createElement(y,{canvasH:n,canvasW:200,yRange:i})),h.a.createElement("div",{style:d.mainPlotWrapDiv},h.a.createElement(f,null,h.a.createElement(k,{width:c,height:u,minX:m,maxX:v}),h.a.createElement(C,{data:r,yRange:i,width:c,height:u,dtWindow:t}))),h.a.createElement(f,null),h.a.createElement(f,null),h.a.createElement(f,null),h.a.createElement(f,null))}}]),a}(u.PureComponent),E=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e&&e.preventDefault();var t=n.data.value.replace(/(\w+:)|(\w+ :)/g,(function(e){return'"'+e.substring(0,e.length-1)+'":'})),a=JSON.parse(t);n.state.data.push(a),n.setState({data:[].concat(Object(i.a)(n.state.data),[a])})},n.state={data:[{time:1509426e3,value:10},{time:1509429600,value:34.5},{time:1509433200,value:34},{time:1509436800,value:33.5},{time:1509440400,value:33},{time:1509444e3,value:32.5},{time:1509447600,value:32},{time:1509451200,value:31.5},{time:1509454800,value:31},{time:1509458400,value:30.5},{time:1509462e3,value:30},{time:1509465600,value:29.5},{time:1509469200,value:29},{time:1509472800,value:28.5},{time:1509476400,value:28},{time:150948e4,value:27.5},{time:1509483600,value:27},{time:1509487200,value:26.5},{time:1509490800,value:26.4},{time:1509494400,value:26.4},{time:1509498e3,value:26.4},{time:1509501600,value:26.5},{time:1509505200,value:26.8},{time:1509508800,value:27},{time:1509512400,value:27.5},{time:1509516e3,value:28},{time:1509519600,value:28.5},{time:1509523200,value:29},{time:1509526800,value:29.5},{time:1509530400,value:30},{time:1509534e3,value:30.5},{time:1509537600,value:31},{time:1509541200,value:31.5},{time:1509544800,value:32},{time:1509548400,value:32.5},{time:1509552e3,value:33},{time:1509555600,value:33.5},{time:1509559200,value:34},{time:1509562800,value:34.5},{time:1509566400,value:35},{time:150957e4,value:35},{time:1509573600,value:35},{time:1509577200,value:35},{time:1509580800,value:35}],dtWindow:[15088148e5,15101172e5],width:1200,height:50,yRange:[4,38],label:"CPB",colorString:"#fffcec",areaChartBackgroundColor:"#fff3e4"},n.handleRemoveBtnCLick=n.handleRemoveBtnCLick.bind(Object(o.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=!0;setInterval((function(){e.simulateDataChange(t),t=!1}),100)}},{key:"handleRemoveBtnCLick",value:function(){var e=this.state.data;e=e.slice(0,-1),this.setState(Object(n.a)(Object(n.a)({},this.state),{},{data:[{name:"Administered Medications",time:1456293058,type:"Intake",value:1},{name:"Blood Products",time:1456293058,type:"Output",value:28.502415458937197},{name:"Urine Output",time:1456293058,type:"Output",value:28.502415458937197},{name:"Administered Medications",time:1456293058,type:"Intake",value:28.502415458937197},{name:"Continuous Medications",time:1456293058,type:"Intake",value:28.502415458937197},{name:"Administered Medications",time:1456293060,type:"Intake",value:28.502415458937197},{name:"Blood Products",time:1456293060,type:"Output",value:28.502415458937197},{name:"Urine Output",time:1456293060,type:"Output",value:28.502415458937197},{name:"Administered Medications",time:1456293060,type:"Intake",value:28.502415458937197},{name:"Continuous Medications",time:1456293060,type:"Intake",value:28.502415458937197}]}))}},{key:"simulateDataChange",value:function(e){var t,a={time:t=this.state.data[this.state.data.length-1].time+3600,value:Math.floor(20*Math.random())+20},r=this.state.data;(r=r.slice(2)).push(a),this.setState(Object(n.a)(Object(n.a)({},this.state),{},{data:[].concat(Object(i.a)(r),[a]),dtWindow:[1e3*this.state.data[0].time,1e3*t-36e5]}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.dtWindow,r=t.width,l=t.height,o=t.yRange,s=t.label,c=t.colorString,u=(t.areaChartBackgroundColor,Object(i.a)(a));return h.a.createElement(h.a.Fragment,null,h.a.createElement("div",null,"Pass in data in the form: "," { time: 1509534000, value: 35 } "),h.a.createElement("form",{onSubmit:this.handleSubmit},h.a.createElement("input",{style:{height:"50px",width:"50%",fontSize:"14pt"},placeholder:"data",type:"text",ref:function(t){e.data=t}}),h.a.createElement("br",null),h.a.createElement("button",null,"ADD DATA")),h.a.createElement("button",{onClick:this.handleRemoveBtnCLick},"REMOVE DATA"),h.a.createElement(j,{data:a,dtWindow:n,width:r,height:l,yRange:o,label:s,colorString:c,areaChartBackgroundColor:"white"}),h.a.createElement("div",null,u.reverse().map((function(e,t){return h.a.createElement("div",{key:e.time+t},e.value)}))))}}]),a}(u.Component);v.a.render(h.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.257bd741.chunk.js.map